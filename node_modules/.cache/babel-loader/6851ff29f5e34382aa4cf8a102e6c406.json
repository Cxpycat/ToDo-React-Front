{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0430\\\\src\\\\components\\\\Dashboard.js\";\nimport React from \"react\";\nimport Task from './Task';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Dashboard extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleClick = () => {\n      const {\n        handleLoginClick\n      } = this.props;\n      handleLoginClick(false);\n    };\n\n    this.state = {\n      todos: [],\n      error: ''\n    };\n\n    this.updateTodos = async () => {\n      const urlToDo = `http://localhost:1337/todos?userId=${this.props.userId}`;\n\n      try {\n        const result = await fetch(urlToDo);\n        const todos = await result.json();\n        this.setState({\n          todos\n        });\n      } catch (err) {\n        this.setState({\n          error: 'Ошибка'\n        });\n      }\n    };\n\n    this.changeToDo = id => {\n      const todos = [...this.state.todos];\n      const todo = todos.filter(todo => todo.id === id)[0];\n      const index = todos.map(function (temp) {\n        return temp.id;\n      }).indexOf(id);\n      todo.completed = !todo.completed;\n      todos[index] = todo;\n      this.setState({\n        todos\n      });\n    };\n\n    this.confirmDeleting = id => {\n      confirmAlert({\n        title: 'Confirm to delete',\n        message: 'Are you sure you want to delete this todo?',\n        buttons: [{\n          label: 'Yes',\n          onClick: () => this.deleteTodo(id)\n        }, {\n          label: 'No',\n          onClick: () => 1\n        }]\n      });\n    };\n\n    this.deleteTodo = async id => {\n      await fetch('http://localhost:1337/todos', {\n        method: 'DELETE',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({\n          id: id\n        })\n      });\n      await this.updateTodos();\n    };\n  }\n\n  async componentDidMount() {\n    await this.updateTodos();\n  }\n\n  render() {\n    const {\n      error,\n      todos\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"top\",\n        children: [\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0437\\u0430\\u0434\\u0430\\u0447: \", todos.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this), todos.map(task => /*#__PURE__*/_jsxDEV(Task, {\n        task: task,\n        toggleCompleted: () => this.changeToDo(task.id),\n        deleteTodo: () => this.confirmDeleting(task.id)\n      }, task.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 26\n      }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleClick,\n        className: \"exit\",\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["D:/Практика/src/components/Dashboard.js"],"names":["React","Task","confirmAlert","Dashboard","Component","handleClick","handleLoginClick","props","state","todos","error","updateTodos","urlToDo","userId","result","fetch","json","setState","err","changeToDo","id","todo","filter","index","map","temp","indexOf","completed","confirmDeleting","title","message","buttons","label","onClick","deleteTodo","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","componentDidMount","render","length","task"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Task from './Task';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\n\n\nclass Dashboard extends React.Component{\n        handleClick = () =>{\n            const {handleLoginClick} =this.props;\n            handleLoginClick(false);\n            }\n\n      state ={\n        todos: [],\n        error: ''\n    }\n\n    async componentDidMount() {\n      await this.updateTodos();\n  };\n    \n  updateTodos = async() => {\n   const urlToDo =`http://localhost:1337/todos?userId=${this.props.userId}`;\n  \ntry{\n  const result = await fetch(urlToDo)\n  const todos = await result.json()\n  this.setState({todos});\n  \n  } catch(err) {\n    this.setState({\n      error: 'Ошибка'\n    })\n  } \n} \n  changeToDo = id => {\n    const todos = [...this.state.todos];\n    const todo = todos.filter(todo => todo.id === id)[0];\n    const index = todos.map(function(temp) { return temp.id; }).indexOf(id);\n    todo.completed = !todo.completed;\n    todos[index] = todo;\n    this.setState({\n    todos\n    });\n  };\n\n  confirmDeleting = id => {\n    confirmAlert({\n        title: 'Confirm to delete',\n        message: 'Are you sure you want to delete this todo?',\n        buttons: [\n            {\n                label: 'Yes',\n                onClick: () => this.deleteTodo(id)\n            },\n            {\n                label: 'No',\n                onClick: () => 1\n            }\n        ]\n    });\n};\n\n  deleteTodo = async id => {\n    await fetch('http://localhost:1337/todos', {\n        method: 'DELETE',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({id: id})\n    });\n\n    await this.updateTodos();\n};\n\n  render(){\n    const {error, todos} =this.state\n\n    return <div className=\"Dashboard\">\n      <h1 className=\"top\">Всего задач: {todos.length}</h1>\n      <h2>{error}</h2>\n      {todos.map(task =>(<Task \n      task={task}\n      key={task.id}\n      toggleCompleted={() => this.changeToDo(task.id)}\n      deleteTodo={() => this.confirmDeleting(task.id)}\n     ></Task>\n       )) \n     }<br></br>\n     <button onClick={this.handleClick} className=\"exit\">Выйти</button>\n    </div>\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}